{"openapi":"3.1.0","info":{"title":"Whisper API","description":"基于OpenAI Whisper模型的语音转文字API","version":"1.0.0"},"paths":{"/":{"get":{"tags":["根"],"summary":"Root","description":"API根路径，重定向到文档","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/health/":{"get":{"tags":["健康检查"],"summary":"健康检查","description":"API健康状态检查，返回服务状态和模型信息","operationId":"health_check_api_v1_health__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/api/v1/transcribe/":{"post":{"tags":["语音转录"],"summary":"转录音频","description":"上传音频文件并使用Whisper模型进行转录\n\n- **file**: 要转录的音频文件（支持的格式：mp3, wav, mp4, m4a, webm等）\n- **mark_keywords**: 是否标记和高亮关键词，默认为True\n\n返回转录的文本内容、相关信息以及保存的文件信息","operationId":"transcribe_audio_api_v1_transcribe__post","parameters":[{"name":"mark_keywords","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"是否标记关键词","default":true,"title":"Mark Keywords"},"description":"是否标记关键词"}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_transcribe_audio_api_v1_transcribe__post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranscriptionWithFileResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/transcribe_batch/":{"post":{"tags":["语音转录"],"summary":"批量转录音频","description":"批量上传多个音频文件并使用Whisper模型进行转录\n\n- **files**: 要转录的音频文件列表\n- **mark_keywords**: 是否标记和高亮关键词，默认为True\n\n返回每个文件的转录结果列表，包含文件信息","operationId":"transcribe_batch_api_v1_transcribe_batch__post","parameters":[{"name":"mark_keywords","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"是否标记关键词","default":true,"title":"Mark Keywords"},"description":"是否标记关键词"}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_transcribe_batch_api_v1_transcribe_batch__post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TranscriptionWithFileResponse"},"title":"Response Transcribe Batch Api V1 Transcribe Batch  Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/transcripts/":{"get":{"tags":["文件管理"],"summary":"获取所有转录文件列表","description":"获取所有保存的转录文件列表","operationId":"list_transcripts_api_v1_transcripts__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TranscriptListItem"},"type":"array","title":"Response List Transcripts Api V1 Transcripts  Get"}}}}}}},"/api/v1/transcripts/{transcript_id}":{"get":{"tags":["文件管理"],"summary":"获取转录文件信息","description":"获取指定转录文件的详细信息","operationId":"get_transcript_info_api_v1_transcripts__transcript_id__get","parameters":[{"name":"transcript_id","in":"path","required":true,"schema":{"type":"string","description":"转录ID","title":"Transcript Id"},"description":"转录ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/TranscriptFileInfo"},{"type":"null"}],"title":"Response Get Transcript Info Api V1 Transcripts  Transcript Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["文件管理"],"summary":"删除转录文件","description":"删除指定的转录文件及其所有相关文件","operationId":"delete_transcript_api_v1_transcripts__transcript_id__delete","parameters":[{"name":"transcript_id","in":"path","required":true,"schema":{"type":"string","description":"转录ID","title":"Transcript Id"},"description":"转录ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/transcripts/{transcript_id}/download/{file_type}":{"get":{"tags":["文件管理"],"summary":"下载转录文件","description":"下载指定转录文件\n\n- **transcript_id**: 转录文件ID\n- **file_type**: 文件类型，可选:\n  - 'txt': 纯文本文件\n  - 'json': 完整JSON转录数据\n  - 'srt': SRT字幕文件\n  - 'md': 标记后的文本文件（Markdown格式）\n  - 'keywords': 关键词标记信息（JSON格式）\n\n返回文件下载响应","operationId":"download_transcript_api_v1_transcripts__transcript_id__download__file_type__get","parameters":[{"name":"transcript_id","in":"path","required":true,"schema":{"type":"string","description":"转录ID","title":"Transcript Id"},"description":"转录ID"},{"name":"file_type","in":"path","required":true,"schema":{"type":"string","description":"文件类型(txt, json, srt, md, keywords)","title":"File Type"},"description":"文件类型(txt, json, srt, md, keywords)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_transcribe_audio_api_v1_transcribe__post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_transcribe_audio_api_v1_transcribe__post"},"Body_transcribe_batch_api_v1_transcribe_batch__post":{"properties":{"files":{"items":{"type":"string","format":"binary"},"type":"array","title":"Files"}},"type":"object","required":["files"],"title":"Body_transcribe_batch_api_v1_transcribe_batch__post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status","description":"API服务状态"},"version":{"type":"string","title":"Version","description":"API版本"},"model_info":{"$ref":"#/components/schemas/ModelInfoResponse","description":"模型信息"}},"type":"object","required":["status","version","model_info"],"title":"HealthResponse","description":"健康检查响应"},"ModelInfoResponse":{"properties":{"model_name":{"type":"string","title":"Model Name","description":"加载的模型名称"},"model_loaded":{"type":"boolean","title":"Model Loaded","description":"模型是否已加载"},"cuda_available":{"type":"boolean","title":"Cuda Available","description":"CUDA是否可用"},"device":{"type":"string","title":"Device","description":"使用的设备(CPU/CUDA)"}},"type":"object","required":["model_name","model_loaded","cuda_available","device"],"title":"ModelInfoResponse","description":"模型信息响应"},"TranscriptFileInfo":{"properties":{"id":{"type":"string","title":"Id","description":"转录ID"},"timestamp":{"type":"integer","title":"Timestamp","description":"创建时间戳"},"filename":{"type":"string","title":"Filename","description":"原始音频文件名"},"title":{"type":"string","title":"Title","description":"转录标题"},"text_file":{"type":"string","title":"Text File","description":"文本文件名"},"json_file":{"type":"string","title":"Json File","description":"JSON文件名"},"srt_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Srt File","description":"SRT字幕文件名"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","description":"识别的语言"},"text_length":{"type":"integer","title":"Text Length","description":"文本长度"},"segments_count":{"type":"integer","title":"Segments Count","description":"分段数量"}},"type":"object","required":["id","timestamp","filename","title","text_file","json_file","text_length","segments_count"],"title":"TranscriptFileInfo","description":"转录文件信息模型"},"TranscriptListItem":{"properties":{"id":{"type":"string","title":"Id","description":"转录ID"},"title":{"type":"string","title":"Title","description":"转录标题"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","description":"识别的语言"},"text":{"type":"string","title":"Text","description":"转录内容预览"},"timestamp":{"type":"number","title":"Timestamp","description":"创建时间"},"has_markup":{"type":"boolean","title":"Has Markup","description":"是否有标记后的文本","default":false}},"type":"object","required":["id","title","text","timestamp"],"title":"TranscriptListItem","description":"转录列表项"},"TranscriptionResponse":{"properties":{"text":{"type":"string","title":"Text","description":"转录的文本内容"},"marked_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Marked Text","description":"带有标记的文本内容"},"keywords":{"anyOf":[{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object"},{"type":"null"}],"title":"Keywords","description":"检测到的关键词列表，按类别分组"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","description":"识别的语言代码"},"segments":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Segments","description":"转录的分段信息"}},"type":"object","required":["text"],"title":"TranscriptionResponse","description":"转录响应模型"},"TranscriptionWithFileResponse":{"properties":{"transcript":{"$ref":"#/components/schemas/TranscriptionResponse","description":"转录结果"},"file_info":{"$ref":"#/components/schemas/TranscriptFileInfo","description":"文件信息"}},"type":"object","required":["transcript","file_info"],"title":"TranscriptionWithFileResponse","description":"包含文件信息的转录响应"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}